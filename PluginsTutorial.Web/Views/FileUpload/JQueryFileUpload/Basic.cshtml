@{
	ViewBag.Title = "JQuery File Upload - Basic";
}

@section head {
	<link href="~/Static/plugins/jQueryFileUpload/css/jquery.fileupload.css" rel="stylesheet" />
	<script src="~/Static/plugins/jQueryFileUpload/js/vendor/jquery.ui.widget.js"></script>
	<script src="~/Static/plugins/jQueryFileUpload/js/jquery.fileupload.js"></script>

	@*this library used to work with IE9 or less, but it will not read the return json object *@
	@*<script src="~/Static/plugins/jQueryFileUpload/js/jquery.iframe-transport.js"></script>*@

	<script type="text/javascript">
		$(document).ready(function () {
			$('#fileupload').fileupload({
				dataType: 'json',
				url: '/JQueryFileUpload/UploadFiles',
				autoUpload: true,
				done: function (e, data) {
					$('.file_name').html(data.result.name);
					$('.file_type').html(data.result.type);
					$('.file_size').html(data.result.size);
					
					//reset progress bar
					//$('.progress .progress-bar').css('width', 0 + '%');
				}
			}).on('fileuploadprogressall', function (e, data) {
				var progress = parseInt(data.loaded / data.total * 100, 10);
				$('.progress .progress-bar').css('width', progress + '%');
			});
		});
	</script>
}



<div class="container">
	<h1>JQuery File Upload</h1>
	<h1>@ViewBag.Title</h1>
	<span class="btn btn-success fileinput-button">
		<i class="glyphicon glyphicon-plus"></i>
		<span>Add files...</span>
		<input id="fileupload" type="file" name="files[]" multiple>
	</span>
	<br />
	<div class="progress">
		<div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
			<span class="sr-only">0% complete</span>
		</div>
	</div>
	<br />
	<div class="file_name"></div>
	<br />
	<div class="file_type"></div>
	<br />
	<div class="file_size"></div>
</div>
